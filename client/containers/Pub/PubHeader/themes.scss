$top-bar-total-height: 54px;

$off-white: #cfcfcf;
$off-black: #333;

$blueprint-style-btn-background: #f8f8f8 linear-gradient(to bottom, rgba(white, 0.8), rgba(white, 0));
$blueprint-style-btn-background-hover: #f0f0f0 linear-gradient(to bottom, rgba(white, 0.8), rgba(white, 0));
$blueprint-style-btn-shadow: inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);

@mixin base-button {
    color: inherit;
    align-items: center;
    text-decoration: none;
    user-select: none;
    background: unset;
    border: unset;
    padding: 0;
    cursor: pointer;
    &:hover,
    &:active,
    &:visited {
        text-decoration: none;
        color: inherit;
    }
}

@mixin shadow-box($box-shadow) {
    position: relative;
    transition: background-color 0.1s ease-out;
    &::after {
        content: '';
        position: absolute;
        pointer-events: none;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        box-shadow: $box-shadow;
        border-radius: inherit;
        transition: opacity 0.1s ease-out;
    }
}

@mixin shadow-box-hover {
    &::after {
        opacity: 1;
    }
}

@mixin color-theme($base-color, $secondary-color) {
    color: $base-color;
    .pub-header-themed-secondary {
        color: $secondary-color;
    }
    .hairline {
        background-color: rgba($base-color, 0.2);
    }
    .collections-bar-button-component {
        border-color: rgba($base-color, 0.2);
        &:hover {
            background: rgba($base-color, 0.2);
        }
    }
    &.pub-header-compact-component {
        color: $base-color;
    }
}

@mixin simple-box-theme($background, $highlight, $hover-background, $box-shadow) {
    .pub-header-themed-box {
        background: $background;
        @include shadow-box($box-shadow);
        &.active {
            border: 2px solid $highlight;
        }
    }
    .pub-header-themed-box-hover-target {
        &:hover {
            .pub-header-themed-box {
                background: $hover-background;
                @include shadow-box-hover();
            }
        }
    }
    .pub-header-themed-box-hover-target.pub-header-themed-box:hover {
        background: $hover-background;
        @include shadow-box-hover();
    }
}

@mixin translucent-box-theme($base-color, $box-shadow, $weight: 1) {
    @include simple-box-theme(
        rgba($base-color, 0.2 * $weight),
        $base-color,
        rgba($base-color, 0.3 * $weight),
        $box-shadow
    );
}

@mixin blocks-button($background-color, $box-shadow, $highlight) {
    background-color: rgba($background-color, 1);
    transition: 0.2s background-color ease-out;
    box-shadow: $box-shadow;
    padding: 2px;
    &:hover {
        background-color: rgba($background-color, 0.8);
    }
    .pub-header-themed-box.active {
        background-color: $highlight;
        color: $background-color;
        border-radius: 2px;
    }
}

@mixin blocks-box-theme($background-color, $highlight) {
    $box-shadow: 4px 6px 9px -4px rgba(0, 0, 0, 0.1);
    .text-wrapper,
    .bp3-editable-text-content {
        /* Ways of accomplishing this effect: */
        /* https://css-tricks.com/multi-line-padded-text/ */
        display: inline;
        background: rgba($background-color, 1);
        padding: 2px 20px;
        box-decoration-break: clone;
        box-shadow: $box-shadow;
    }
    .pub-header-themed-box {
        border-radius: 0;
    }
    .small-header-button-component {
        border-radius: 2px;
    }
    .large-header-button-component {
        border-radius: 2px;
        overflow: hidden;
        @include blocks-button($background-color, $box-shadow, $highlight);
        .outer-label {
            margin-right: 20px;
        }
    }
    .middle {
        .description,
        .byline {
            margin-bottom: 0;
        }
    }
    .right {
        .small-header-button-component {
            @include blocks-button($background-color, $box-shadow, $highlight);
        }
    }
    .hairline {
        background-color: transparent;
    }
    .background-safety-layer {
        background-color: rgba($background-color, 0.5);
        backdrop-filter: blur(20px);
        box-shadow: $box-shadow;
        &.full-height {
            height: 100%;
        }
    }
    &.js-is-sticky {
        .background-safety-layer {
            height: 100%;
        }
    }
}

.pub-header-theme-light {
    $box-shadow: 0px 0px 8px rgba(black, 0.05);
    @include color-theme(white, $off-white);
    @include translucent-box-theme(white, $box-shadow);
}

.pub-header-theme-dark {
    $box-shadow: 0px 0px 8px rgba(black, 0.05);
    @include color-theme(#222, $off-black);
    @include translucent-box-theme(black, $box-shadow, 0.5);
}

.pub-header-theme-white-blocks {
    @include color-theme(black, $off-black);
    @include blocks-box-theme(white, black);
}

.pub-header-theme-black-blocks {
    @include color-theme(white, white);
    @include blocks-box-theme(black, white);
}
